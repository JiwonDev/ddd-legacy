## 개요

가게를 위한 주문 및 메뉴 관리 시스템를 구축한다

## 용어 정의

| 용어                    | 설명                                                                                           |                                                 |
|-----------------------|----------------------------------------------------------------------------------------------|-------------------------------------------------|
| 메뉴 (Menu)             | 음식점에서 판매하는 음식이나 음료의 항목을 의미한다. 메뉴는 이름, 가격, 관련 상품 정보, 그리고 전시 여부와 같은 특성을 포함한다.                  |                                                 |
| 메뉴그룹 (MenuGroup)      | 메뉴들을 그룹화하는 카테고리를 의미한다. 예를 들어, '디저트', '메인 요리', '사이드' 등과 같이 여러 메뉴들을 분류할 때 사용된다.                |                                                 |
| 주문 (Order)            | 고객이 선택한 메뉴나 상품에 대한 요청을 의미한다. 주문은 주문 타입, 주문 상태, 주문 시간, 주문 아이템, 배달 주소, 주문 테이블 등의 정보를 포함할 수 있다. |  |
|                       | 주문은 주문상턔(`대기중, 승인됨, 제공됨, 배달중, 배달됨, 완료됨`) 와 주문타입(`배달, 포장, 매장식사`)을 가진다.                        |
| 주문아이템 (OrderLineItem) | 특정 주문에 속하는 개별 메뉴 항목을 의미한다. 주문 아이템은 선택된 메뉴, 그 메뉴의 가격, 그리고 수량 등의 정보를 포함한다.                     |                                                 |
| 주문 테이블 (OrderTable)   | 고객이 앉아 음식을 먹을 수 있는 테이블을 의미한다. 테이블은 점유 여부, 최대 손님 수 등의 정보를 가질 수 있다.                            |                                                 |
| 상품 (OrderType)        | 주문의 종류를 나타내는 분류이다. '배달', '포장', '매장식사' 등과 같이 주문이 어떤 방식으로 처리될지를 표시한다.                          |                                                 |

## 핵심 기능

| NO | 내용                                  |  |
|----|-------------------------------------------|----------|
| 1  | 주문테이블, 메뉴그룹, 메뉴, 상품 정보들을 관리하고 확인할 수 있다.   |          |
| 2  | 서비스가 진행됨에 따라 변화하는 주문의 진행상황과 타입을 확인할 수 있다. |          |
| 3  | 포장 및 배달 서비스를 연동을 제공한다.                    |          |

## 상세 요구사항

- ### 메뉴 그룹 (**Menu Group**)
    - [ ] 메뉴를 등록하기 위해 메뉴그룹을 생성할 수 있다.
    - [ ] 전체 메뉴 그룹을 리스트로 조회할 수 있다.


- ### 메뉴 (**Menu**)
    - [ ] 모든 메뉴를 리스트로 조회할 수 있다.
    - [ ] 메뉴를 생성하고 수정할 수 있다.
    - [ ] 메뉴는 `필수`가격, `필수`이름, `필수`메뉴그룹, `필수`전시여부, `옵션`메뉴상품 리스트를 가진다
        - 메뉴 전시여부
            - [ ] 메뉴의 전시여부는 언제든지 수정할 수 있다.
            - [ ] 메뉴를 전시하려면 (상품의 가격 * 재고)의 합이 메뉴의 가격을 초과하지 않아야 한다.
        - 메뉴 그룹
            - [ ] 메뉴는 반드시 메뉴 그룹에 속해있어야한다.
            - [ ] 메뉴 그룹은 삭제할 수 없다.
        - 메뉴 가격
            - [ ] 메뉴의 가격은 언제든지 변경할 수 있다.
            - [ ] 메뉴의 가격은 0원 이하가 될 수 없다.
        - 메뉴 이름
            - [ ] 메뉴의 이름은 빈 값이거나 공백일 수 없다.
            - [ ] 메뉴의 이름은 욕설을 포함할 수 없다. 
            - `(참고용) 한국어 욕설 검증 API (https://github.com/dl0312/open-apis-korea)`
        - 메뉴 상품
            - [ ] 메뉴상품은 상품정보와 재고 정보를 포함해야 한다.
            - [ ] 등록할 때 등록일 기준 존재하는 상품을 선택하여 메뉴상품으로 등록할 수 있다.
            - [ ] 등록할 때 메뉴 상품의 재고는 0보다 작을 수 없다.
            - [ ] 메뉴안에 포함된 모든 (상품의 가격 * 재고)의 합은 메뉴의 가격을 초과할 수 없다.


- ### 주문 (**Order**)
    - [ ] 모든 주문을 리스트로 조회할 수 있다
    - [ ] 주문을 생성할 수 있다
    - [ ] 주문은 `필수`주문타입, `필수`주문상태, `필수`주문시간, `필수`주문아이템, `필수`배달주소, `필수`주문테이블을 가진다.
        - 주문 타입
            - [ ] 주문은 `(배달, 포장, 매장식사)` 중 하나의 주문 타입을 가지고 있다
        - 주문 상태
            - [ ] 모든 주문은 `( 대기중, 승인됨, 제공됨, 배달중, 배달됨, 완료됨 )` 중 하나의 상태를 가진다.
            - [ ] 주문을 처음 만들면 `(대기중)` 상태로 생성된다.
            - [ ] 주문을 승인하면, `(승인됨)` 상태로 변경된다.
            - [ ] 배달 주문타입을 승인하면 `(배달중)`으로 변경되고 배달서버에 배송 요청을 전달한다.
            - [ ] 승인됨 상태의 주문이 제공되면, `(제공됨)` 상태로 변경된다. 제공은 반드시 승인됨 상태일 때만 가능하다.
            - [ ] `(배달타입, 제공됨)` 주문만 배달을 시작할 수 있다.
            - [ ] `(배달타입, 배달중)` 주문만 배달을 완료할 수 있다.
            - [ ] `(배달타입, 배달중)` 주문과 `(포장타입, 제공됨) 또는 (매장식사타입, 제공됨)`이 아닌 경우에만 주문을 완료할 수 있다.

        - 주문 아이템
            - [ ] 한 주문은 여러 개의 주문아이템을 가질 수 있다.
            - [ ] 주문 아이템은 메뉴와 재고 정보를 가지고 있다.
            - [ ] 주문 아이템은 반드시 등록되어있는 전시상태인 메뉴만을 선택할 수 있다.
            - [ ] `(포장타입 또는 배달타입)`인 경우, 모든 주문아이템이 재고는 0 이상이어야 한다.
            - [ ] `(매장식사타입)` 인 경우, 주문테이블이 사용중이어선 안된다.
            - [ ] 주문 아이템의 가격은 해당 메뉴의 가격과 항상 동일해야한다.
        - 배송 주소
            - [ ] `(배달타입)` 인 경우, 주문을 생성할 때 배달 주소가 반드시 있어야한다.
        - 주문 테이블
            - [ ] `(매장식사타입)` 인 경우, 주문테이블이 점유된 상태가 아니어야 주문을 생성할 수 있다.
            - [ ] 주문이 완료되면 주문테이블은 점유하지 않은 상태로 초기화된다.

- ### 주문 테이블 (**Order Table**)
    - [ ] 주문 테이블을 생성할 수 있다. 생성된 주문 테이블의 손님 수는 반드시 0 이상이어야 한다
    - [ ] 주문 테이블을 점유할 수 있다.
    - [ ] 주문이 완료된 상태라면 주문 테이블을 초기화 할 수 있다.
    - [ ] 주문 테이블의 최대 손님 수를 변경할 수 있다.
    - [ ] 모든 주문 테이블을 리스트로 조회할 수 있다.

- ### 상품 (**Product**)
    - [ ] 상품을 생성할 수 있다.
    - [ ] 상품의 가격은 반드시 0을 초과해야 한다.
    - [ ] 상품 이름에는 욕설이 들어갈 수 없다.
    - [ ] 상품의 가격을 변경할 수 있다. 해당 상품이 포함된 메뉴들에서 (상품 가격*재고)가 메뉴가격을 초과한다면, 해당 메뉴 전시를 비활성화 한다.
    - [ ] 모든 상품을 리스트로 조회 할 수 있다.
